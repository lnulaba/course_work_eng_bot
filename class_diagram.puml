@startuml class_diagram!theme plainskinparam backgroundColor Whiteskinparam class {    BackgroundColor LightCyan    BorderColor Navy    FontColor Black    ArrowColor Navy}skinparam interface {    BackgroundColor LightYellow    BorderColor Orange}skinparam note {    BackgroundColor LightGreen    BorderColor DarkGreen}title **–î—ñ–∞–≥—Ä–∞–º–∞ –∫–ª–∞—Å—ñ–≤ English Learning Bot**' === –û–°–ù–û–í–ù–Ü –ö–õ–ê–°–ò ===class "üìä User" {    - user_id: int <<PK>>    - telegram_id: bigint <<UNIQUE>>    - username: varchar(50)    - full_name: varchar(100)    - created_at: timestamp    - is_active: boolean    --    + register(): boolean    + authenticate(): boolean    + updateProfile(): void    + deactivate(): void}class "üìà UserProgress" {    - progress_id: int <<PK>>    - user_id: int <<FK>>    - level_english: enum    - total_questions_answered: int    - correct_answers: int    - accuracy: decimal(5,2)    - last_updated: timestamp    --    + updateProgress(): void    + calculateAccuracy(): decimal    + checkLevelUp(): boolean    + getStatistics(): object}class "‚öôÔ∏è Settings" {    - setting_id: int <<PK>>    - user_id: int <<FK>>    - preferred_language: enum    - daily_goal: int    - notification_time: time    - sound_enabled: boolean    --    + updateSettings(): void    + getNotificationTime(): time    + setDailyGoal(): void    + toggleSound(): void}class "üìö Topic" {    - topic_id: int <<PK>>    - topic_name: varchar(100)    - description: text    - difficulty_level: enum    - is_active: boolean    --    + getTopics(): array    + getByLevel(): array    + activate(): void    + deactivate(): void}class "üìñ Word" {    - word_id: int <<PK>>    - word: varchar(100)    - translation: varchar(200)    - level_english: enum    - file_audio: varchar(255)    - check_admin: boolean    - created_at: timestamp    --    + getWordsByLevel(): array    + playAudio(): void    + markAsLearned(): void    + getRandomWords(): array}class "‚ùì Question" {    - question_id: int <<PK>>    - topic_id: int <<FK>>    - question_text: text    - option_a: varchar(255)    - option_b: varchar(255)    - option_c: varchar(255)    - option_d: varchar(255)    - correct_answer: char(1)    - difficulty_level: enum    - ai_generated: boolean    --    + generateQuestion(): Question    + checkAnswer(): boolean    + getByTopic(): array    + getByDifficulty(): array}class "üéØ TestSession" {    - session_id: int <<PK>>    - user_id: int <<FK>>    - session_type: enum    - questions_answered: int    - correct_answers: int    - started_at: timestamp    - completed_at: timestamp    - is_completed: boolean    --    + startSession(): TestSession    + addAnswer(): void    + completeSession(): void    + calculateResults(): object}' === –Ü–ù–¢–ï–†–§–ï–ô–°–ò ===interface "ü§ñ BotInterface" {    + sendMessage(text: string): void    + sendKeyboard(keyboard: array): void    + playAudio(file: string): void    + showResults(data: object): void}interface "üß† AIInterface" {    + generateQuestions(topic: string, level: string): array    + explainMistake(question: string, answer: string): string    + getRecommendations(user: User): array}interface "üóÑÔ∏è DatabaseInterface" {    + connect(): connection    + query(sql: string): result    + insert(table: string, data: object): int    + update(table: string, data: object): boolean    + delete(table: string, id: int): boolean}' === –ö–û–ù–¢–†–û–õ–ï–†–ò ===class "üéÆ TelegramBotController" {    - bot_token: string    - api_url: string    --    + handleStart(): void    + handleWordLearning(): void    + handleTestGeneration(): void    + handleSettings(): void    + handleStatistics(): void}class "üßÆ LearningController" {    --    + processWordLearning(user: User): void    + generateTest(topic: Topic, user: User): TestSession    + evaluateAnswer(answer: string, question: Question): boolean    + updateUserProgress(user: User, session: TestSession): void}class "üìä StatisticsController" {    --    + getUserStatistics(user: User): object    + calculateAccuracy(user: User): decimal    + generateReport(user: User): string    + checkAchievements(user: User): array}class "ü§ñ ChatGPTController" {    - api_key: string    - model: string    --    + generateQuestions(prompt: string): array    + explainGrammar(topic: string): string    + createExercise(level: string): object}' === –ó–û–í–ù–Ü–®–ù–Ü –°–ï–†–í–Ü–°–ò ===class "üì± TelegramAPI" {    - token: string    --    + sendMessage(): void    + getUpdates(): array    + setWebhook(): boolean}class "üß† OpenAI_API" {    - api_key: string    --    + createCompletion(): object    + generateText(): string    + analyzeText(): object}class "üóÑÔ∏è MySQL_Database" {    - host: string    - database: string    --    + connect(): connection    + executeQuery(): result
    + transaction(): void
}

' === –ó–í'–Ø–ó–ö–ò ===

' –û–¥–∏–Ω –¥–æ –æ–¥–Ω–æ–≥–æ (1:1)
User ||--|| Settings : "has"
note on link: –ö–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î\n–æ–¥–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

User ||--|| UserProgress : "tracks"
note on link: –ö–æ–∂–µ–Ω –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î\n–æ–¥–∏–Ω –∑–∞–ø–∏—Å –ø—Ä–æ–≥—Ä–µ—Å—É

' –û–¥–∏–Ω –¥–æ –±–∞–≥–∞—Ç—å–æ—Ö (1:N)
User ||--o{ TestSession : "participates"
note on link: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –º–∞—Ç–∏\n–±–∞–≥–∞—Ç–æ —Å–µ—Å—ñ–π —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

Topic ||--o{ Question : "contains"
note on link: –¢–µ–º–∞ –º—ñ—Å—Ç–∏—Ç—å\n–±–∞–≥–∞—Ç–æ –ø–∏—Ç–∞–Ω—å

' –ë–∞–≥–∞—Ç–æ –¥–æ –æ–¥–Ω–æ–≥–æ (N:1)
TestSession }o--|| User : "belongs to"
Question }o--|| Topic : "categorized by"

' –ë–∞–≥–∞—Ç–æ –¥–æ –±–∞–≥–∞—Ç—å–æ—Ö —á–µ—Ä–µ–∑ –ø—Ä–æ–º—ñ–∂–Ω—É —Ç–∞–±–ª–∏—Ü—é
User }o--o{ Word : "learns"
note on link: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ –≤–∏–≤—á–∞—é—Ç—å —Å–ª–æ–≤–∞\n(—á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—é user_word_progress)

' –°–∞–º–æ–∑–≤'—è–∑–æ–∫
Topic ||--o{ Topic : "parent/child"
note on link: –¢–µ–º–∏ –º–æ–∂—É—Ç—å –º–∞—Ç–∏\n–ø—ñ–¥—Ç–µ–º–∏ (self-reference)

' –ê–≥—Ä–µ–≥–∞—Ü—ñ—è
TelegramBotController o-- BotInterface
LearningController o-- AIInterface
StatisticsController o-- DatabaseInterface

' –ö–æ–º–ø–æ–∑–∏—Ü—ñ—è
TelegramBotController *-- LearningController
TelegramBotController *-- StatisticsController
TelegramBotController *-- ChatGPTController

' –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤
TelegramAPI ..|> BotInterface
OpenAI_API ..|> AIInterface
MySQL_Database ..|> DatabaseInterface

' –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
LearningController ..> User : "uses"
LearningController ..> Word : "uses"
LearningController ..> Question : "uses"
LearningController ..> TestSession : "creates"

StatisticsController ..> UserProgress : "analyzes"
StatisticsController ..> TestSession : "aggregates"

ChatGPTController ..> Question : "generates"
ChatGPTController ..> Topic : "uses"

' === –ü–†–ò–ú–Ü–¢–ö–ò ===

note top of User : **–ì–æ–ª–æ–≤–Ω–∞ —Å—É—Ç–Ω—ñ—Å—Ç—å**\n–ó–±–µ—Ä–∏–≥—Ä–∞—î –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞\n–∑ Telegram

note right of UserProgress : **–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É**\n–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è\n–ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó —Å–µ—Å—ñ—ó

note left of Question : **AI –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è**\n–ü–∏—Ç–∞–Ω–Ω—è –º–æ–∂—É—Ç—å –±—É—Ç–∏\n—Å—Ç–≤–æ—Ä–µ–Ω—ñ ChatGPT

note bottom of TestSession : **–°–µ—Å—ñ—ó –Ω–∞–≤—á–∞–Ω–Ω—è**\n–ó–±–µ—Ä—ñ–≥–∞—é—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏\n–∫–æ–∂–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

@enduml
