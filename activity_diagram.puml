@startuml activity_diagram!theme plainskinparam backgroundColor Whiteskinparam activity {    BackgroundColor LightSkyBlue    BorderColor Navy    FontColor Black    FontSize 12}skinparam activityStart {    Color Green}skinparam activityEnd {    Color Red}skinparam decision {    BackgroundColor LightYellow    BorderColor Orange}skinparam note {    BackgroundColor LightGreen    BorderColor DarkGreen}title **Діаграма діяльності English Learning Bot**start:🚀 Запуск бота;if (👤 Користувач\nзареєстрований?) then (❌ НІ)    :📝 Реєстрація нового користувача;    :💾 Створення запису в таблиці users;    :⚙️ Створення початкових налаштувань\nв таблиці settings;    :📊 Ініціалізація прогресу\nв таблиці user_progress;else (✅ ТАК)    :🔑 Автентифікація користувача;    :📋 Завантаження даних з БД;endifif (🎯 Рівень\nвизначено?) then (❌ НІ)    :📝 **ПОЧАТКОВИЙ ТЕСТ**;        :📚 Тест на слова (40 слів)\nз таблиці words;    note right        Вибір слів за рівнями:        • A0: 0-300 слів        • A1: 300-1000 слів        • A2: 1000-2500 слів        • B1: 2500-5000 слів        • B2: 5000-8000 слів        • C1: 8000-12000 слів        • C2: 12000-16000 слів    end note        :❓ Тест лексика/граматика\n(20 питань multiple choice)\nз таблиці questions;        :📖 Тест на розуміння тексту\n(20 питань multiple choice);        :✍️ Короткий опис історії\nчи про себе;        :🧮 Аналіз результатів;    :🎯 Визначення рівня (A0-C2);    :💾 Збереження рівня в user_progress;    else (✅ ТАК)    :📱 Головне меню;endifrepeat    :🎛️ **ВИБІР ТИПУ НАВЧАННЯ**;        switch (Тип діяльності?)    case (📚 ВИВЧЕННЯ СЛІВ)        :🔍 Завантаження слів за рівнем\nз таблиці words;                repeat            :👁️ Показ слова;            if (💡 Знаю слово?) then (✅ ТАК)                :✅ Позначити як вивчене;                :➕ accuracy в user_progress;            else (❌ НІ)                :🔄 Додати до повторення;                :📝 Показати переклад;                :📢 Відтворити аудіо (file_audio);            endif        repeat while (Є ще слова?)            case (🧠 ГЕНЕРАЦІЯ ТЕСТІВ ChatGPT)        :🤖 **ГЕНЕРАЦІЯ 20+ ПИТАНЬ**;        note right            Кнопка генерації через ChatGPT API:            • Часи (Tenses)            • Граматика (Grammar)              • Лексика (Vocabulary)            • Розуміння тексту        end note                :🎯 Вибір теми з таблиці topics;        :🤖 Виклик ChatGPT API;        :💾 Збереження питань в questions;                repeat            :❓ Показ питання;            :👆 Отримання відповіді;            if (✅ Правильна\nвідповідь?) then (✅ ТАК)                :➕ correct_answers++;                :🎉 Показ "Правильно!";            else (❌ НІ)                :📝 Показ правильної відповіді;                :💡 Пояснення помилки;            endif            :➕ total_questions_answered++;        repeat while (❓ Є ще питання?)                :🧮 Розрахунок accuracy;        :💾 Оновлення user_progress;            case (📖 ЧИТАННЯ З РОЗУМІННЯМ)        :📄 Завантаження тексту за рівнем;        :👁️ Показ тексту для читання;        :🤖 Генерація питань до тексту;                repeat            :❓ Питання на розуміння;            :👆 Отримання відповіді;            :✅ Перевірка правильності;        repeat while (❓ Є ще питання?)                :📊 Оцінка розуміння;        :💾 Оновлення прогресу;            case (⚙️ НАЛАШТУВАННЯ)        :📋 Показ поточних налаштувань\nз таблиці settings;        if (🔧 Зміна\nналаштувань?) then (✅ ТАК)            :🌐 preferred_language;            :⏰ notification_time;            :🎯 daily_goal;            :💾 Збереження в settings;        endif            case (📊 СТАТИСТИКА)        :📈 Завантаження user_progress;        :📋 Відображення статистики;        note right            • total_questions_answered            • correct_answers              • accuracy %            • level_english            • last_updated        end note    endswitch        :🕐 Оновлення last_updated;        if (🎯 Досягнуто\nщоденну ціль?) then (✅ ТАК)        :🎉 Вітання з досягненням!;        :🏆 Нагорода/бейдж;    endif        if (📈 Готовий до\nпідвищення рівня?) then (✅ ТАК)        :🎓 Пропозиція тесту на новий рівень;        if (✅ Погоджуюсь?) then (✅ ТАК)            :📝 Тест на підвищення;            if (🎯 Успішно\nпройдено?) then (✅ ТАК)                :⬆️ Підвищення level_english;                :🎊 Привітання з новим рівнем!;            else (❌ НІ)                :💪 Рекомендації для покращення;            endif        endif    endifrepeat while (🔄 Продовжити\nнавчання?):💾 Збереження фінального прогресу;:👋 Завершення сесії;stop@enduml